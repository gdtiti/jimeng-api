{
  "scripts": {
    "dev": "tsup src/index.ts --format cjs,esm --sourcemap --dts --publicDir public --watch --onSuccess \"node --enable-source-maps --no-node-snapshot dist/index.js\"",
    "start": "node --enable-source-maps --no-node-snapshot dist/index.js",
    "build": "tsup src/index.ts --format cjs,esm --sourcemap --dts --clean --publicDir public",
    "test": "node examples/usage-examples.js",
    "test:auth": "node -e \"const { CookieManager } = require('./dist/lib/auth/cookie-manager.js'); console.log('Testing cookie management...');\"",
    "test:urls": "node -e \"const { URLManager } = require('./dist/lib/config/url-manager.js'); const manager = URLManager.getInstance(); console.log('URL configs:', manager.getConfigStats());\"",
    "test:cookie-parse": "node -e \"const { CookieManager } = require('./dist/lib/auth/cookie-manager.js'); const testCookie = 'sessionid=token123.....capcut_locale=en.....uid_tt=user456'; console.log('Parsed:', CookieManager.parseCookie(testCookie));\"",
    "examples": "node examples/usage-examples.js",
    "examples:basic": "node -e \"const { generateCookieString, runAllExamples } = require('./examples/usage-examples.js'); console.log('Generated Cookie:', generateCookieString('test-token', 'us'));\"",
    "examples:auth": "node -e \"const { cookieManagementExample, regionDetectionExample } = require('./examples/usage-examples.js'); cookieManagementExample(); regionDetectionExample();\"",
    "examples:urls": "node -e \"const { urlManagementExample, urlAvailabilityTest } = require('./examples/usage-examples.js'); urlManagementExample();\"",
    "config:validate": "node -e \"const { URLManager } = require('./dist/lib/config/url-manager.js'); const manager = URLManager.getInstance(); const stats = manager.getConfigStats(); console.log('âœ… URLé…ç½®éªŒè¯é€šè¿‡'); console.log('é…ç½®æ•°é‡:', Object.keys(stats).length);\"",
    "config:test": "node -e \"const { URLManager } = require('./dist/lib/config/url-manager.js'); const manager = URLManager.getInstance(); Promise.all(['jimeng-cn', 'jimeng-us'].map(name => manager.testURLAvailability(manager.getAvailableURL(name)))).then(results => console.log('URLæµ‹è¯•ç»“æœ:', results));\"",
    "auth:test": "node -e \"const { CookieManager } = require('./dist/lib/auth/cookie-manager.js'); const tests = ['sessionid=test.....capcut_locale=zh-CN', 'us-token123', 'invalid-cookie']; tests.forEach(test => { try { const result = CookieManager.parseCookie(test); console.log('âœ…', test.substring(0, 20), '->', result.region); } catch(e) { console.log('âŒ', test.substring(0, 20), '->', e.message); } });\"",
    "monitor:auth": "node -e \"const { AuthManager } = require('./dist/lib/auth/auth-manager.js'); const manager = AuthManager.getInstance(); setInterval(() => { console.log('Auth cache stats:', manager.getAuthStats()); }, 10000);\"",
    "monitor:urls": "node -e \"const { URLManager } = require('./dist/lib/config/url-manager.js'); const manager = URLManager.getInstance(); setInterval(() => { console.log('URL stats:', manager.getConfigStats()); }, 15000);\"",
    "health-check": "node -e \"const { URLManager } = require('./dist/lib/config/url-manager.js'); const manager = URLManager.getInstance(); Promise.all(['jimeng-cn', 'jimeng-us', 'imagex-cn', 'imagex-us'].map(name => manager.getFastestURL(name))).then(urls => { console.log('âœ… æ‰€æœ‰URLå¥åº·æ£€æŸ¥é€šè¿‡'); console.log('å¿«é€ŸURL:', urls); }).catch(err => console.error('âŒ å¥åº·æ£€æŸ¥å¤±è´¥:', err.message));\"",
    "setup:config": "node -e \"const fs = require('fs'); const path = require('path'); const configPath = path.join(process.cwd(), 'config.yml'); if (!fs.existsSync(configPath)) { fs.copyFileSync(path.join(process.cwd(), 'config-example.yml'), configPath); console.log('âœ… é…ç½®æ–‡ä»¶å·²åˆ›å»º: config.yml'); } else { console.log('â„¹ï¸  é…ç½®æ–‡ä»¶å·²å­˜åœ¨'); }\"",
    "setup:env": "node -e \"const fs = require('fs'); const envExample = '# å³æ¢¦APIç¯å¢ƒå˜é‡é…ç½®\\n\\n# æœåŠ¡é…ç½®\\nPORT=5566\\nHOST=0.0.0.0\\n\\n# URLé…ç½®\\nJIMENG_CN_URLS=https://jimeng.jianying.com\\nJIMENG_US_URLS=https://api-proxy-1.deno.dev/dreamina/us;https://dreamina-api.us.capcut.com\\nIMAGEX_CN_URLS=https://imagex.bytedanceapi.com\\nIMAGEX_US_URLS=https://imagex16-normal-us-ttp.capcutapi.us\\nCOMMERCE_US_URLS=https://commerce.us.capcut.com\\n\\n# è®¤è¯é…ç½®\\nAUTH_CACHE_TTL=300000\\n\\n# æ—¥å¿—é…ç½®\\nLOG_LEVEL=info\\n'; const envPath = path.join(process.cwd(), '.env'); if (!fs.existsSync(envPath)) { fs.writeFileSync(envPath, envExample); console.log('âœ… ç¯å¢ƒå˜é‡æ–‡ä»¶å·²åˆ›å»º: .env'); } else { console.log('â„¹ï¸  ç¯å¢ƒå˜é‡æ–‡ä»¶å·²å­˜åœ¨'); }\"",
    "docker:build": "docker build -t jimeng-api:latest .",
    "docker:run": "docker run -p 5566:5566 --env-file .env jimeng-api:latest",
    "docker:dev": "docker-compose up --build",
    "lint": "eslint src --ext .ts",
    "lint:fix": "eslint src --ext .ts --fix",
    "format": "prettier --write \"src/**/*.{ts,js,json}\" \"examples/**/*.{js,json}\"",
    "format:check": "prettier --check \"src/**/*.{ts,js,json}\" \"examples/**/*.{js,json}\"",
    "type-check": "tsc --noEmit",
    "clean": "rimraf dist",
    "clean:cache": "rimraf .cache",
    "pre-commit": "npm run type-check && npm run lint && npm run format:check",
    "release": "npm run clean && npm run build && npm run test",
    "debug": "node --inspect-brk --enable-source-maps --no-node-snapshot dist/index.js",
    "benchmark": "node -e \"const start = Date.now(); const { request } = require('./dist/api/controllers/core-enhanced'); const testCookie = 'sessionid=test.....capcut_locale=en'; request('POST', '/ping', testCookie, { serviceType: 'jimeng' }).then(() => console.log('è¯·æ±‚è€—æ—¶:', Date.now() - start, 'ms')).catch(console.error);\"",
    "docs:generate": "node -e \"const fs = require('fs'); const path = require('path'); const docs = { title: 'å³æ¢¦APIæ–°è®¤è¯æœºåˆ¶', version: '1.0.0', features: ['æ™ºèƒ½Cookieè§£æ', 'å¤šåœ°å€è½®è¯¢', 'è‡ªåŠ¨åœ°åŒºæ£€æµ‹', 'å‘åå…¼å®¹'], usage: { cookie: 'ä½¿ç”¨.....åˆ†éš”çš„cookieå­—ç¬¦ä¸²', token: 'æ”¯æŒæ—§æ ¼å¼refreshToken', urls: 'æ”¯æŒå¤šä¸ªURLé…ç½®' } }; fs.writeFileSync(path.join(process.cwd(), 'docs', 'api-summary.json'), JSON.stringify(docs, null, 2)); console.log('âœ… APIæ–‡æ¡£å·²ç”Ÿæˆ');\"",
    "docs:serve": "python -m http.server 8080 --directory docs",
    "migration:check": "node -e \"console.log('ğŸ“‹ è¿ç§»æ£€æŸ¥:'); console.log('âœ… Cookieç®¡ç†å™¨å·²å°±ç»ª'); console.log('âœ… URLç®¡ç†å™¨å·²å°±ç»ª'); console.log('âœ… å¢å¼ºç‰ˆè¯·æ±‚å‡½æ•°å·²å°±ç»ª'); console.log('â„¹ï¸  è¯·è¿è¡Œ npm run examples æ¥æµ‹è¯•æ–°åŠŸèƒ½');\"",
    "demo:cookie": "node -e \"const { generateCookieString } = require('./examples/usage-examples.js'); const cnCookie = generateCookieString('demo-token', 'cn'); const usCookie = generateCookieString('demo-token', 'us'); console.log('ğŸª ä¸­å›½ç‰ˆCookie:'); console.log(cnCookie); console.log('\\nğŸŒ å›½é™…ç‰ˆCookie:'); console.log(usCookie);\"",
    "demo:auth": "node -e \"const { AuthManager } = require('./dist/lib/auth/auth-manager.js'); const manager = AuthManager.getInstance(); const testCookie = 'sessionid=demo123.....capcut_locale=en.....uid_tt=demo456'; manager.getAuthInfo(testCookie).then(info => { console.log('ğŸ” è®¤è¯ä¿¡æ¯:'); console.log(JSON.stringify(info, null, 2)); }).catch(console.error);\"",
    "demo:urls": "node -e \"const { URLManager } = require('./dist/lib/config/url-manager.js'); const manager = URLManager.getInstance(); console.log('ğŸŒ URLé…ç½®:'); Object.entries(manager.getConfigStats()).forEach(([name, config]) => { console.log(\\`\\\\n\\\${config.name} (\\\${name}):\\\`); console.log(\\`  ç­–ç•¥: \\\${config.strategy}\\\`); console.log(\\`  URLs: \\\${config.urls.join(', ')}\\\`); });\"",
    "validate:all": "npm run config:validate && npm run health-check && npm run auth:test && npm run type-check",
    "quick-start": "npm run setup:config && npm run setup:env && npm run build && npm run validate:all && echo '\\nğŸš€ å¿«é€Ÿè®¾ç½®å®Œæˆï¼ç°åœ¨å¯ä»¥è¿è¡Œ npm start å¯åŠ¨æœåŠ¡'",
    "dev:enhanced": "npm run dev & npm run monitor:auth & npm run monitor:urls",
    "test:integration": "node -e \"console.log('ğŸ§ª é›†æˆæµ‹è¯•å¼€å§‹...'); const { runAllExamples } = require('./examples/usage-examples.js'); runAllExamples().then(() => console.log('âœ… é›†æˆæµ‹è¯•å®Œæˆ')).catch(err => console.error('âŒ é›†æˆæµ‹è¯•å¤±è´¥:', err.message));\""
  },
  "description": "å¢å¼ºç‰ˆè„šæœ¬é…ç½® - æ”¯æŒæ–°è®¤è¯æœºåˆ¶å’ŒURLç®¡ç†"
}